{"version":3,"sources":["../node_modules/react-router/es/withRouter.js","components/layoutold/Columns.js","views/Login/SetPassword.js"],"names":["react__WEBPACK_IMPORTED_MODULE_0__","__webpack_require__","react__WEBPACK_IMPORTED_MODULE_0___default","n","prop_types__WEBPACK_IMPORTED_MODULE_1__","prop_types__WEBPACK_IMPORTED_MODULE_1___default","hoist_non_react_statics__WEBPACK_IMPORTED_MODULE_2__","hoist_non_react_statics__WEBPACK_IMPORTED_MODULE_2___default","_Route__WEBPACK_IMPORTED_MODULE_3__","_extends","Object","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","__webpack_exports__","Component","C","props","wrappedComponentRef","remainingProps","obj","keys","indexOf","_objectWithoutProperties","a","createElement","children","routeComponentProps","ref","displayName","name","WrappedComponent","propTypes","func","Columns","memo","_ref","className","columnClasses","classNames","_Users_joaomoura_Repos_jti_global_portfolio_backoffice_node_modules_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__","react__WEBPACK_IMPORTED_MODULE_1___default","Column","_ref2","_classNames2","align","classes","styles","textAlign","style","SetPassword","state","componentDidMount","_this$props$match$par","_this","match","params","token","user","api","verifyForgotPassword","then","email","setState","verified","error","catch","login","history","push","retry","window","location","onChange","value","_Users_joaomoura_Repos_jti_global_portfolio_backoffice_node_modules_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__","invalidPassword","submit","_callee","_this$props$match$par2","_this$state","password1","password2","_Users_joaomoura_Repos_jti_global_portfolio_backoffice_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default","wrap","_context","prev","next","_validatePasswords","loading","useForgotPassword","success","stop","renderStep","t","_this$state2","react__WEBPACK_IMPORTED_MODULE_8___default","Fragment","components_elements_Message__WEBPACK_IMPORTED_MODULE_12__","text","components_layoutold_Columns__WEBPACK_IMPORTED_MODULE_16__","components_elements_Button__WEBPACK_IMPORTED_MODULE_13__","onClick","icon","iconPosition","_this$state3","components_elements_Alert__WEBPACK_IMPORTED_MODULE_14__","title","onDismiss","dismiss","components_forms_TextInput__WEBPACK_IMPORTED_MODULE_15__","errors","type","label","color","this","components_layoutold_Title__WEBPACK_IMPORTED_MODULE_11__","PureComponent","withRouter","translate"],"mappings":"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","file":"static/js/6.494baa36.chunk.js","sourcesContent":["var _extends = Object.assign || function (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n\n    for (var key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        target[key] = source[key];\n      }\n    }\n  }\n\n  return target;\n};\n\nfunction _objectWithoutProperties(obj, keys) {\n  var target = {};\n\n  for (var i in obj) {\n    if (keys.indexOf(i) >= 0) continue;\n    if (!Object.prototype.hasOwnProperty.call(obj, i)) continue;\n    target[i] = obj[i];\n  }\n\n  return target;\n}\n\nimport React from \"react\";\nimport PropTypes from \"prop-types\";\nimport hoistStatics from \"hoist-non-react-statics\";\nimport Route from \"./Route\";\n/**\n * A public higher-order component to access the imperative API\n */\n\nvar withRouter = function withRouter(Component) {\n  var C = function C(props) {\n    var wrappedComponentRef = props.wrappedComponentRef,\n        remainingProps = _objectWithoutProperties(props, [\"wrappedComponentRef\"]);\n\n    return React.createElement(Route, {\n      children: function children(routeComponentProps) {\n        return React.createElement(Component, _extends({}, remainingProps, routeComponentProps, {\n          ref: wrappedComponentRef\n        }));\n      }\n    });\n  };\n\n  C.displayName = \"withRouter(\" + (Component.displayName || Component.name) + \")\";\n  C.WrappedComponent = Component;\n  C.propTypes = {\n    wrappedComponentRef: PropTypes.func\n  };\n  return hoistStatics(C, Component);\n};\n\nexport default withRouter;","import React, {memo} from 'react'\nimport classNames from 'classnames'\n\nconst Columns = memo( function({children, className}) {\n  const columnClasses = classNames(\n    'columns',\n    {\n      [className]         : className,\n    },\n  )\n\n  return <div className={columnClasses}>\n    {children}\n  </div>\n\n})\n\nconst Column = memo( function({children, align, className}) {\n  \n  const classes = classNames(\n    'column', \n    {\n      [className] : className,\n      ['has-text-'+align] : align,\n    }\n  )\n  \n  const styles = {\n    textAlign: align,\n  }\n  \n  return <div style={styles} className={classes}>\n    {children}\n  </div>\n\n})\n\nexport { \n  Column, \n  Columns,\n}\n","import React, { PureComponent } from 'react'\nimport { translate } from 'react-multi-lang'\nimport { withRouter } from 'react-router'\n\nimport Title from 'components/layoutold/Title'\nimport Message from 'components/elements/Message'\nimport Button from 'components/elements/Button'\nimport Alert from 'components/elements/Alert'\nimport TextInput from 'components/forms/TextInput'\nimport { Columns, Column } from 'components/layoutold/Columns'\nimport { api } from 'services';\n\nclass SetPassword extends PureComponent {\n\n  state = {}\n\n  componentDidMount = () => {\n    const { token, user } = this.props.match.params\n    if(token) {\n      api.user.verifyForgotPassword(user, token).then(\n        ({email}) => {\n          if (email) {\n            this.setState({ verified: true })\n          } else {\n            this.setState({ error: true })\n          }\n        }\n      ).catch(\n        () => this.setState({ error: true })\n      )\n    }\n    else {\n      this.setState({ error: true })\n    }\n  }\n\n  login = () => {\n    this.props.history.push('/login')\n  }\n\n  retry = () => {\n    window.location = '/login/forgot'\n  }\n\n  onChange = (name, value) => {\n    this.setState({\n      invalidPassword : false,\n      [name]          : value,\n    })\n  }\n\n  _validatePasswords (password1, password2) {\n    return password1 && password1.length >= 8 && password1 === password2\n  }\n\n  submit = async () => {\n    const { token, user } = this.props.match.params\n    const { password1, password2 } = this.state\n\n    if (this._validatePasswords(password1, password2)) {\n      this.setState({ loading: true })\n      api.user.useForgotPassword(user, token, password1).then(\n        () => this.setState({ success: true })\n      ).catch(\n        () => this.setState({ error: true })\n      )\n    } else {\n      this.setState({ invalidPassword: true })\n    }\n  }\n\n  renderStep = () => {\n    const { t } = this.props\n    const { error, verified, success, loading } = this.state\n    if (error) {\n      return <>\n        <Message error text={t('login.forgot.error')} />\n        <br />\n        <Columns>\n          <Column align=\"center\">\n            <Button onClick={this.retry} text={t('errors.retry')} />\n          </Column>\n        </Columns>\n      </>\n    } else if (success) {\n      return <Columns>\n        <Column align=\"center\">\n          <Message success text={t('login.forgot.success')} />\n          <br />\n          <Button \n            icon=\"chevron-right\"\n            iconPosition=\"right\" \n            onClick={this.login} \n            text={t('login.login')} \n          />\n        </Column>\n      </Columns>\n    } else if (loading) {\n      return <Message loading text={t('loading')} />\n    } else if (verified) {\n      const { password1, password2, invalidPassword } = this.state\n      return <>\n        { invalidPassword &&\n          <Alert error title={t('errors.invalid_password')} onDismiss={this.dismiss} /> \n        }\n        <Columns>\n          <Column>\n            <TextInput errors\n              name=\"password1\"\n              type=\"password\"\n              label={t('login.password')}\n              value={password1}\n              onChange={this.onChange}\n            />\n          </Column>\n        </Columns>\n        <Columns>\n          <Column>\n            <TextInput errors\n              name=\"password2\"\n              type=\"password\"\n              label={t('login.confirm')}\n              value={password2}\n              onChange={this.onChange}\n            />\n          </Column>\n        </Columns>\n        <Columns>\n          <Column>\n            <Button color=\"success\" text={t('login.forgot.submit')} onClick={this.submit} />\n          </Column>\n        </Columns>\n      </>\n    } else {\n      return <Message loading text={t('login.forgot.verifying')} />\n    }\n  }\n\n  render(){\n    const { t } = this.props\n\n    return <div>\n      <Title text={t('login.forgot.password')} />\n\n      {this.renderStep()}\n\n      </div>\n  }\n}\n\nexport default withRouter(\n  translate(\n    SetPassword\n  )\n)\n"],"sourceRoot":""}