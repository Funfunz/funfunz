"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.setConfig = setConfig;
exports.default = _default;

var _jsonschema = require("jsonschema");

var _settingsSchema = _interopRequireDefault(require("./settingsSchema"));

var _configSchema = _interopRequireDefault(require("./configSchema"));

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var config = {
  settings: [],
  config: {}
};

function setConfig(configs, target) {
  if (configCheck(configs, target)) {
    config[target] = configs;
  }
}

function configCheck(configs, target) {
  var validator = new _jsonschema.Validator();

  if (!configs) {
    throw new Error('Configuration is missing');
  }

  if (target === 'settings') {
    var validation = validator.validate(configs, _settingsSchema.default);

    if (validation.errors.length > 0) {
      throw new Error(validation.errors.toString());
    }
  }

  if (target === 'config') {
    var _validation = validator.validate(configs, _configSchema.default);

    if (_validation.errors.length > 0) {
      throw new Error(_validation.errors.toString());
    }
  }

  return true;
}

function _default() {
  return config;
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy9hcGkvdXRpbHMvY29uZmlnTG9hZGVyLnRzIl0sIm5hbWVzIjpbImNvbmZpZyIsInNldHRpbmdzIiwic2V0Q29uZmlnIiwiY29uZmlncyIsInRhcmdldCIsImNvbmZpZ0NoZWNrIiwidmFsaWRhdG9yIiwiVmFsaWRhdG9yIiwiRXJyb3IiLCJ2YWxpZGF0aW9uIiwidmFsaWRhdGUiLCJzZXR0aW5nc1NjaGVtYSIsImVycm9ycyIsImxlbmd0aCIsInRvU3RyaW5nIiwiY29uZmlnU2NoZW1hIl0sIm1hcHBpbmdzIjoiOzs7Ozs7OztBQUFBOztBQUNBOztBQUNBOzs7O0FBRUEsSUFBSUEsTUFJSCxHQUFHO0FBQ0ZDLEVBQUFBLFFBQVEsRUFBRSxFQURSO0FBRUZELEVBQUFBLE1BQU0sRUFBRTtBQUZOLENBSko7O0FBU08sU0FBU0UsU0FBVCxDQUFvQkMsT0FBcEIsRUFBa0NDLE1BQWxDLEVBQWtEO0FBQ3ZELE1BQUlDLFdBQVcsQ0FBQ0YsT0FBRCxFQUFVQyxNQUFWLENBQWYsRUFBa0M7QUFDaENKLElBQUFBLE1BQU0sQ0FBQ0ksTUFBRCxDQUFOLEdBQWlCRCxPQUFqQjtBQUNEO0FBQ0Y7O0FBRUQsU0FBU0UsV0FBVCxDQUFzQkYsT0FBdEIsRUFBb0NDLE1BQXBDLEVBQW9EO0FBQ2xELE1BQU1FLFNBQVMsR0FBRyxJQUFJQyxxQkFBSixFQUFsQjs7QUFFQSxNQUFJLENBQUNKLE9BQUwsRUFBYztBQUNaLFVBQU0sSUFBSUssS0FBSixDQUFVLDBCQUFWLENBQU47QUFDRDs7QUFDRCxNQUFJSixNQUFNLEtBQUssVUFBZixFQUEyQjtBQUN6QixRQUFNSyxVQUFVLEdBQUdILFNBQVMsQ0FBQ0ksUUFBVixDQUFtQlAsT0FBbkIsRUFBNEJRLHVCQUE1QixDQUFuQjs7QUFDQSxRQUFJRixVQUFVLENBQUNHLE1BQVgsQ0FBa0JDLE1BQWxCLEdBQTJCLENBQS9CLEVBQWtDO0FBQ2hDLFlBQU0sSUFBSUwsS0FBSixDQUFVQyxVQUFVLENBQUNHLE1BQVgsQ0FBa0JFLFFBQWxCLEVBQVYsQ0FBTjtBQUNEO0FBQ0Y7O0FBQ0QsTUFBSVYsTUFBTSxLQUFLLFFBQWYsRUFBeUI7QUFDdkIsUUFBTUssV0FBVSxHQUFHSCxTQUFTLENBQUNJLFFBQVYsQ0FBbUJQLE9BQW5CLEVBQTRCWSxxQkFBNUIsQ0FBbkI7O0FBQ0EsUUFBSU4sV0FBVSxDQUFDRyxNQUFYLENBQWtCQyxNQUFsQixHQUEyQixDQUEvQixFQUFrQztBQUNoQyxZQUFNLElBQUlMLEtBQUosQ0FBVUMsV0FBVSxDQUFDRyxNQUFYLENBQWtCRSxRQUFsQixFQUFWLENBQU47QUFDRDtBQUNGOztBQUNELFNBQU8sSUFBUDtBQUNEOztBQUVjLG9CQUFZO0FBQ3pCLFNBQU9kLE1BQVA7QUFDRCIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFZhbGlkYXRvciB9IGZyb20gJ2pzb25zY2hlbWEnXG5pbXBvcnQgc2V0dGluZ3NTY2hlbWEgZnJvbSAnQHJvb3QvYXBpL3V0aWxzL3NldHRpbmdzU2NoZW1hJ1xuaW1wb3J0IGNvbmZpZ1NjaGVtYSBmcm9tICdAcm9vdC9hcGkvdXRpbHMvY29uZmlnU2NoZW1hJ1xuXG5sZXQgY29uZmlnOiB7XG4gIHNldHRpbmdzOiBBcnJheTxhbnk+LFxuICBjb25maWc6IGFueSxcbiAgW2tleTogc3RyaW5nXTogYW55LFxufSA9IHtcbiAgc2V0dGluZ3M6IFtdLFxuICBjb25maWc6IHt9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBzZXRDb25maWcgKGNvbmZpZ3M6IGFueSwgdGFyZ2V0OiBzdHJpbmcpIHtcbiAgaWYgKGNvbmZpZ0NoZWNrKGNvbmZpZ3MsIHRhcmdldCkpIHtcbiAgICBjb25maWdbdGFyZ2V0XSA9IGNvbmZpZ3NcbiAgfVxufVxuXG5mdW5jdGlvbiBjb25maWdDaGVjayAoY29uZmlnczogYW55LCB0YXJnZXQ6IHN0cmluZykge1xuICBjb25zdCB2YWxpZGF0b3IgPSBuZXcgVmFsaWRhdG9yKCk7XG5cbiAgaWYgKCFjb25maWdzKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdDb25maWd1cmF0aW9uIGlzIG1pc3NpbmcnKVxuICB9XG4gIGlmICh0YXJnZXQgPT09ICdzZXR0aW5ncycpIHtcbiAgICBjb25zdCB2YWxpZGF0aW9uID0gdmFsaWRhdG9yLnZhbGlkYXRlKGNvbmZpZ3MsIHNldHRpbmdzU2NoZW1hKVxuICAgIGlmICh2YWxpZGF0aW9uLmVycm9ycy5sZW5ndGggPiAwKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IodmFsaWRhdGlvbi5lcnJvcnMudG9TdHJpbmcoKSlcbiAgICB9XG4gIH1cbiAgaWYgKHRhcmdldCA9PT0gJ2NvbmZpZycpIHtcbiAgICBjb25zdCB2YWxpZGF0aW9uID0gdmFsaWRhdG9yLnZhbGlkYXRlKGNvbmZpZ3MsIGNvbmZpZ1NjaGVtYSlcbiAgICBpZiAodmFsaWRhdGlvbi5lcnJvcnMubGVuZ3RoID4gMCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKHZhbGlkYXRpb24uZXJyb3JzLnRvU3RyaW5nKCkpXG4gICAgfVxuICB9XG4gIHJldHVybiB0cnVlXG59XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uICgpIHtcbiAgcmV0dXJuIGNvbmZpZ1xufSJdfQ==