"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;

var _mysql = _interopRequireDefault(require("mysql2"));

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

// get the client
// create the connection to database
function createConnection() {
  return _mysql.default.createConnection({
    host: process.env.DBHost,
    user: process.env.DBUser,
    password: process.env.DBPassword,
    database: process.env.DBName
  });
} // simple query


var tables = function tables() {
  return new Promise(function (res, rej) {
    var connection = createConnection();
    connection.execute('show tables', function (err, results) {
      if (err) {
        rej(err);
      }

      var tables = results.map(function (result) {
        return result["Tables_in_".concat(process.env.DBName)];
      });
      res({
        connection: connection,
        tables: tables
      });
    });
  }).then(function (result) {
    result.connection.end();
    return result.tables;
  }).catch(function (err) {
    throw err;
  });
};

var _default = tables;
exports.default = _default;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9saXN0VGFibGVzLnRzIl0sIm5hbWVzIjpbImNyZWF0ZUNvbm5lY3Rpb24iLCJteXNxbCIsImhvc3QiLCJwcm9jZXNzIiwiZW52IiwiREJIb3N0IiwidXNlciIsIkRCVXNlciIsInBhc3N3b3JkIiwiREJQYXNzd29yZCIsImRhdGFiYXNlIiwiREJOYW1lIiwidGFibGVzIiwiUHJvbWlzZSIsInJlcyIsInJlaiIsImNvbm5lY3Rpb24iLCJleGVjdXRlIiwiZXJyIiwicmVzdWx0cyIsIm1hcCIsInJlc3VsdCIsInRoZW4iLCJlbmQiLCJjYXRjaCJdLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUNBOzs7O0FBREE7QUFJQTtBQUNBLFNBQVNBLGdCQUFULEdBQTRCO0FBQzFCLFNBQU9DLGVBQU1ELGdCQUFOLENBQXVCO0FBQzVCRSxJQUFBQSxJQUFJLEVBQUVDLE9BQU8sQ0FBQ0MsR0FBUixDQUFZQyxNQURVO0FBRTVCQyxJQUFBQSxJQUFJLEVBQUVILE9BQU8sQ0FBQ0MsR0FBUixDQUFZRyxNQUZVO0FBRzVCQyxJQUFBQSxRQUFRLEVBQUVMLE9BQU8sQ0FBQ0MsR0FBUixDQUFZSyxVQUhNO0FBSTVCQyxJQUFBQSxRQUFRLEVBQUVQLE9BQU8sQ0FBQ0MsR0FBUixDQUFZTztBQUpNLEdBQXZCLENBQVA7QUFNRCxDLENBRUQ7OztBQUVBLElBQU1DLE1BQU0sR0FBRyxTQUFUQSxNQUFTLEdBQThCO0FBQzNDLFNBQU8sSUFBSUMsT0FBSixDQUNMLFVBQUNDLEdBQUQsRUFBTUMsR0FBTixFQUFjO0FBQ1osUUFBTUMsVUFBVSxHQUFHaEIsZ0JBQWdCLEVBQW5DO0FBQ0FnQixJQUFBQSxVQUFVLENBQUNDLE9BQVgsQ0FDRSxhQURGLEVBRUUsVUFBQ0MsR0FBRCxFQUFNQyxPQUFOLEVBQThDO0FBQzVDLFVBQUlELEdBQUosRUFBUztBQUNQSCxRQUFBQSxHQUFHLENBQUNHLEdBQUQsQ0FBSDtBQUNEOztBQUNELFVBQU1OLE1BQXFCLEdBQUdPLE9BQU8sQ0FBQ0MsR0FBUixDQUFZLFVBQUFDLE1BQU07QUFBQSxlQUFJQSxNQUFNLHFCQUFjbEIsT0FBTyxDQUFDQyxHQUFSLENBQVlPLE1BQTFCLEVBQVY7QUFBQSxPQUFsQixDQUE5QjtBQUNBRyxNQUFBQSxHQUFHLENBQUM7QUFBQ0UsUUFBQUEsVUFBVSxFQUFWQSxVQUFEO0FBQWFKLFFBQUFBLE1BQU0sRUFBTkE7QUFBYixPQUFELENBQUg7QUFDRCxLQVJIO0FBVUQsR0FiSSxFQWNMVSxJQWRLLENBZUwsVUFBQ0QsTUFBRCxFQUFZO0FBQ1ZBLElBQUFBLE1BQU0sQ0FBQ0wsVUFBUCxDQUFrQk8sR0FBbEI7QUFDQSxXQUFPRixNQUFNLENBQUNULE1BQWQ7QUFDRCxHQWxCSSxFQW1CTFksS0FuQkssQ0FvQkwsVUFBQU4sR0FBRyxFQUFJO0FBQ0wsVUFBTUEsR0FBTjtBQUNELEdBdEJJLENBQVA7QUF3QkQsQ0F6QkQ7O2VBNkJlTixNIiwic291cmNlc0NvbnRlbnQiOlsiLy8gZ2V0IHRoZSBjbGllbnRcbmltcG9ydCBteXNxbCBmcm9tICdteXNxbDInXG5pbXBvcnQgeyB0eXBlQW5zd2VycyB9IGZyb20gJ0Byb290L2luZGV4J1xuXG4vLyBjcmVhdGUgdGhlIGNvbm5lY3Rpb24gdG8gZGF0YWJhc2VcbmZ1bmN0aW9uIGNyZWF0ZUNvbm5lY3Rpb24oKSB7XG4gIHJldHVybiBteXNxbC5jcmVhdGVDb25uZWN0aW9uKHtcbiAgICBob3N0OiBwcm9jZXNzLmVudi5EQkhvc3QsXG4gICAgdXNlcjogcHJvY2Vzcy5lbnYuREJVc2VyLFxuICAgIHBhc3N3b3JkOiBwcm9jZXNzLmVudi5EQlBhc3N3b3JkLFxuICAgIGRhdGFiYXNlOiBwcm9jZXNzLmVudi5EQk5hbWVcbiAgfSlcbn1cbiBcbi8vIHNpbXBsZSBxdWVyeVxuXG5jb25zdCB0YWJsZXMgPSAoKTogUHJvbWlzZTxBcnJheTxzdHJpbmc+PiA9PiB7XG4gIHJldHVybiBuZXcgUHJvbWlzZTxhbnk+KFxuICAgIChyZXMsIHJlaikgPT4ge1xuICAgICAgY29uc3QgY29ubmVjdGlvbiA9IGNyZWF0ZUNvbm5lY3Rpb24oKVxuICAgICAgY29ubmVjdGlvbi5leGVjdXRlKFxuICAgICAgICAnc2hvdyB0YWJsZXMnLFxuICAgICAgICAoZXJyLCByZXN1bHRzOiBBcnJheTxteXNxbC5Sb3dEYXRhUGFja2V0PikgPT4ge1xuICAgICAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgICAgIHJlaihlcnIpXG4gICAgICAgICAgfVxuICAgICAgICAgIGNvbnN0IHRhYmxlczogQXJyYXk8c3RyaW5nPiA9IHJlc3VsdHMubWFwKHJlc3VsdCA9PiByZXN1bHRbYFRhYmxlc19pbl8ke3Byb2Nlc3MuZW52LkRCTmFtZX1gXSlcbiAgICAgICAgICByZXMoe2Nvbm5lY3Rpb24sIHRhYmxlc30pXG4gICAgICAgIH1cbiAgICAgIClcbiAgICB9XG4gICkudGhlbihcbiAgICAocmVzdWx0KSA9PiB7XG4gICAgICByZXN1bHQuY29ubmVjdGlvbi5lbmQoKVxuICAgICAgcmV0dXJuIHJlc3VsdC50YWJsZXNcbiAgICB9XG4gICkuY2F0Y2goXG4gICAgZXJyID0+IHtcbiAgICAgIHRocm93IGVyclxuICAgIH1cbiAgKVxufVxuXG5cblxuZXhwb3J0IGRlZmF1bHQgdGFibGVzIl19